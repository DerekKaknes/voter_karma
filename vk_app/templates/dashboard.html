<!DOCTYPE html>
<html lang="en">
<head>
<style>
footer
{
	padding-top: 20px;
	padding-bottom: 20px;
	background-color:#e7e7e7;
}
</style>
	<title>VoterKarma Dashboard</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>
	<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>

</head>

<>

<body>

<!--in body navbar-->
<nav class="navbar navbar-default navbar-fixed-top" style="border-color:rgb(117,158,205)">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>				
      <a class="navbar-brand" href="#" style="color:rgb(117,158,205); font-size:150%; font-weight:bold;"><span style="color:black">Voter</span>Karma</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a class="headLink" style="color:rgb(117,158,205); font-size:150%;" href="dashboard.html">My Score</a></li>
        <li><a href="about.html" style="color:rgb(117,158,205); font-size:150%;">About</a></li>
        <li><a href="#" style="color:rgb(117,158,205); font-size:150%;">Improve My Score</a></li>
	<li><a href="#"><span style="color:rgb(117,158,205); font-size:150%;" class="glyphicon glyphicon-user"></span></a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div>
  </div>
</nav>
<div style="height:50px;"></div>
<div class= "container-fluid" style="text-align:center">
<div class="container-fluid">
	<h2>Overall Score</h2>
	<div id="overallContainer" style="width: 100%; height: 400px;"></div>
</div>


<!-- start div with 3 columns-->
<div class="row">
	<div class="col-sm-4">
		<h2>Local</h2>
		<div id="localContainer" style="width: 100%; height: 400px;"></div>
		<h4>
			Last Voted: 11/8/2016
			<br>
			Impact: Medium
		</h4>
		
	</div>
	<div class="col-sm-4">
		<h2>Presidential</h2>
		<div id="presContainer" style="width: 100%; height: 400px;"></div>
		<h4>
			Last Voted: 11/8/2016
			<br>
			Impact: Medium
		</h4>
	</div>
	<div class="col-sm-4">
		<h2>Midterm</h2>
		<div id="midtermContainer" style="width: 100%; height: 400px;"></div>
		<h4>
			Last Voted: 11/8/2016
			<br>
			Impact: Medium
		</h4>
	</div>
</div>
<!-- end div with 3 columns -->

<hr>

<!-- start of about div -->
<div class="container" style="text-align:left">
<h1>About Your Score</h1>
<br>
<h4>Your score is based on your voting record data.</h4> <br>
</div>
<!-- start div with 3 columns-->
<div class="row">
	<div class="col-sm-1">
	</div>
	<div class="col-sm-2">
		<img src="../../static/img/Voting.png" class="img-responsive" alt="voting">
		<h4>Your voter history is compiled</h4>
	</div>
	<div class="col-sm-2">
	</div>
	<div class="col-sm-2">
		<img src="../../static/img/Scores.png" class="img-responsive" alt="scores">
		<h4>We analyze your election voting history</h4>
	</div>
	<div class="col-sm-2">
	</div>
	<div class="col-sm-2">
		<img src="../../static/img/Score.png" class="img-responsive" alt="score">
		<h4>Your overall VoterKarma score is created</h4>
	</div>
	<div class="col-sm-1">
	</div>
</div>
<!-- end of about div -->

<!-- footer start -->
<footer class="container-fluid text-center">
  <p>Website created by members of the VoterKarma Team</p>
  <p>Thank you Debug Politics for organizing the event!</p>
</footer>
<!-- footer end -->

</div>
<script id="globalFunctions">
function pickColor(voteVal)
{
	switch(Math.floor(voteVal/25))
	{
		case 0: 
			return '#d0021b'; 
		case 1:
			return '#f8e71c';
		case 2:
			return '#4a90e2';
		case 3:
			return '#2fc227';
		default:
			return '#000000';
	}
}
</script>
<script id="overallGauge">
var count = 4;
var graphNames = ["overallContainer", "localContainer", "presContainer", "midtermContainer"];
var yourScore = [{{ over }}, {{ local }}, {{ pres }}, {{ mid }}];
var avg = [{{ over_avg }}, {{ local_avg }}, {{ pres_avg }}, {{ mid_avg }}];
var charts = [];


$(document).ready(function(){
	var i;
	for(i = 0; i< 4; i++)
	{
    	charts[i] = Highcharts.chart( graphNames[i], {
        chart: {
            type: 'solidgauge',
 	    events: 
	    {
            	load: function(){
                	// show tooltip on 4th point
                	var p = this.series[0].points[0];
                	this.tooltip.refresh(p);  
            	}
            }
        },
        title: {
            text: null,
		style: {
                fontSize: '24px'
            }
        },
        tooltip: {
            borderWidth: 0,
	    hideDelay: 100000,
            backgroundColor: 'none',
            shadow: false,
            style: {
                fontSize: '16px'
            },
            pointFormat: '<p style="text-align:center; color:{point.color}">{series.name}:<br><span style="text-align:center; color:{point.color}; font-size:2em; font-weight: bold">{point.y}%</span></p>',
            positioner: function (labelWidth, labelHeight) {
                   	var ele = document.getElementById(this.chart.container.id);
			//var offset = ele.offset();
			var width = ele.offsetWidth;
			var height = ele.offsetHeight;
			return {
                   		x: width/2 - labelWidth/2,
                    		y: height/2 - labelHeight/2
                	};
            }
        },
        pane: {
            startAngle: 360,
            endAngle: 0,
            background: [{ //Track for yourScore
                outerRadius: '112%',
                innerRadius: '84%',
                backgroundColor: Highcharts.Color(pickColor(yourScore[i])).setOpacity(0.3).get(),
                borderWidth: 0
            }, { // Track for average
                outerRadius: '75%',
                innerRadius: '55%',
                backgroundColor: Highcharts.Color(pickColor(avg[i])).setOpacity(0.3).get(),
                borderWidth: 0
            }]
        },
        yAxis: {
            min: 0,
            max: 100,
            lineWidth: 0,
            tickPositions: []
        },
        plotOptions: {
            solidgauge: {
                borderWidth: '34px',
                dataLabels: {
                    enabled: false
                },
                linecap: 'round',
                stickyTracking: false
            }
        },
        series: [{
            name: 'VoterKarma',
            borderColor: pickColor(yourScore[i]),
            data: [{
                color: pickColor(yourScore[i]),
                radius: '101%',
                innerRadius: '95%',
                y: yourScore[i]
            }]
        }, {
            name: 'Average',
            borderColor: pickColor(avg[i]),
            data: [{
                color: pickColor(avg[i]),
                radius: '65%',
                innerRadius: '65%',
                y: avg[i]
            }]
        }]
    })
}
});

</script>
</body>
</html>
